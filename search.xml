<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>页脚徽标和计时器</title>
      <link href="/2025/01/23/%E9%A1%B5%E8%84%9A%E5%BE%BD%E6%A0%87%E5%92%8C%E8%AE%A1%E6%97%B6%E5%99%A8/"/>
      <url>/2025/01/23/%E9%A1%B5%E8%84%9A%E5%BE%BD%E6%A0%87%E5%92%8C%E8%AE%A1%E6%97%B6%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="页脚Github徽标（店长）"><a href="#页脚Github徽标（店长）" class="headerlink" title="页脚Github徽标（店长）"></a>页脚Github徽标（店长）</h1><h2 id="下载插件"><a href="#下载插件" class="headerlink" title="下载插件"></a>下载插件</h2><p>安装插件,在博客根目录<code>[BlogRoot]</code>下打开终端，运行以下指令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-footer-beautify --save</span><br></pre></td></tr></table></figure><h2 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h2><p>添加配置信息，以下为写法示例<br>在站点配置文件<code>_config.yml</code>或者主题配置文件<code>_config.butterfly.yml</code>中添加（这是我的配置）</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># footer_beautify  </span></span><br><span class="line"><span class="comment"># 页脚计时器：[Native JS Timer](https://akilar.top/posts/b941af/)  </span></span><br><span class="line"><span class="comment"># 页脚徽标：[Add Github Badge](https://akilar.top/posts/e87ad7f8/)  </span></span><br><span class="line"><span class="attr">footer_beautify:</span>  </span><br><span class="line">  <span class="attr">enable:</span>  </span><br><span class="line">    <span class="attr">timer:</span> <span class="literal">true</span> <span class="comment"># 计时器开关  </span></span><br><span class="line">    <span class="attr">bdage:</span> <span class="literal">true</span> <span class="comment"># 徽标开关  </span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权  </span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span> <span class="comment"># 应用页面  </span></span><br><span class="line">  <span class="attr">exclude:</span> <span class="comment">#屏蔽页面  </span></span><br><span class="line">    <span class="comment"># - /posts/  </span></span><br><span class="line">    <span class="comment"># - /about/  </span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型  </span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span>  </span><br><span class="line">    <span class="attr">name:</span> <span class="string">footer-wrap</span>  </span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span>  </span><br><span class="line">  <span class="comment"># 计时器部分配置项（看你喜欢哪个，最好下载下来放到自己的项目中不然会增加我网站的负载）  </span></span><br><span class="line">  <span class="comment"># 这是我的    </span></span><br><span class="line">  <span class="comment"># runtime_js: https://www.fomal.cc/static/js/runtime.js  </span></span><br><span class="line">  <span class="comment"># runtime_css: https://www.fomal.cc/static/css/runtime.min.css   </span></span><br><span class="line">  <span class="comment"># 这是店长的   </span></span><br><span class="line">  <span class="attr">runtime_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.js</span>  </span><br><span class="line">  <span class="attr">runtime_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css</span>  </span><br><span class="line">  <span class="comment"># 徽标部分配置项  </span></span><br><span class="line">  <span class="attr">swiperpara:</span> <span class="number">0</span> <span class="comment">#若非0，则开启轮播功能，每行徽标个数  </span></span><br><span class="line">  <span class="attr">bdageitem:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://hexo.io/</span> <span class="comment">#徽标指向网站链接  </span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo</span> <span class="comment">#徽标API  </span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">博客框架为Hexo_v6.2.0</span> <span class="comment">#徽标提示语  </span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://butterfly.js.org/</span>  </span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender</span>  </span><br><span class="line">      <span class="attr">message:</span> <span class="string">主题版本Butterfly_v4.3.1</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://vercel.com/</span>  </span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel</span>  </span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站采用多线部署，主线路托管于Vercel</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://dashboard.4everland.org/</span>  </span><br><span class="line">    <span class="comment"># https://img.shields.io/badge/Hosted-4EVERLAND-3FE2C1?style=flat&amp;logo=IPFS  </span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Hosted-4EVERLAND-22DDDD?style=flat&amp;logo=IPFS</span>  </span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站采用多线部署，备用线路托管于4EVERLAND</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://github.com/</span>  </span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub</span>  </span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站项目由Github托管</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">http://creativecommons.org/licenses/by-nc-sa/4.0/</span>  </span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris</span>  </span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可</span>  </span><br><span class="line">  <span class="attr">swiper_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span>  </span><br><span class="line">  <span class="attr">swiper_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span>  </span><br><span class="line">  <span class="attr">swiperbdage_init_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js</span></span><br></pre></td></tr></table></figure><p>自定义徽标网站：<a href="https://shields.io/">自定义徽标</a></p><h2 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h2><table><thead><tr><th>参数</th><th>备选值&#x2F;类型</th><th>释义</th></tr></thead><tbody><tr><td>priority</td><td>number</td><td>【可选】过滤器优先级，数值越小，执行越早，默认为10，选填</td></tr><tr><td>enable.timer</td><td>true&#x2F;false</td><td>【必选】计时器控制开关</td></tr><tr><td>enable.bdage</td><td>true&#x2F;false</td><td>【必选】徽标控制开关</td></tr><tr><td>enable_page</td><td>path</td><td>【可选】填写想要应用的页面,如根目录就填’&#x2F;‘,分类页面就填’&#x2F;categories&#x2F;‘。若要应用于所有页面，就填<code>all</code>，默认为<code>all</code></td></tr><tr><td>exclude</td><td>path</td><td>【可选】填写想要屏蔽的页面，可以多个。仅当enable_page为’all’时生效。写法见示例。原理是将屏蔽项的内容逐个放到当前路径去匹配，若当前路径包含任一屏蔽项，则不会挂载。</td></tr><tr><td>layout.type</td><td>id&#x2F;class</td><td>【可选】挂载容器类型，填写id或class，不填则默认为id</td></tr><tr><td><a href="http://layout.name/">layout.name</a></td><td>text</td><td>【必选】挂载容器名称</td></tr><tr><td>layout.index</td><td>0和正整数</td><td>【可选】前提是layout.type为class，因为同一页面可能有多个class，此项用来确认究竟排在第几个顺位</td></tr><tr><td>runtime_js</td><td>url</td><td>【必选】页脚计时器脚本，可以下载上文填写示例的链接，参照注释和<a href="https://akilar.top/posts/b941af/">教程：Native JS Timer</a>自行修改。</td></tr><tr><td>runtime_css</td><td>url</td><td>【可选】自定义样式，预留开发者接口，可自行下载。</td></tr><tr><td>swiperpara</td><td>number</td><td>【可选】若非零，则开启轮播功能，此项表示每行最多容纳徽标个数，用来应对徽标过多显得页脚拥挤的问题</td></tr><tr><td>bdageitem.link</td><td>url</td><td>【可选】页脚徽标指向的网站链接</td></tr><tr><td>bdageitem.shields</td><td>url</td><td>【必选】页脚徽标对应的API，API具体写法示例参照<a href="https://akilar.top/posts/e87ad7f8/">教程Add Github Badge</a></td></tr><tr><td>bdageitem.message</td><td>text</td><td>【可选】页脚徽标悬停时显示的信息</td></tr><tr><td>swiper_css</td><td>url</td><td>【可选】swiper的依赖</td></tr><tr><td>swiper_js</td><td>url</td><td>【可选】swiper的依赖</td></tr><tr><td>swiperbdage_init_js</td><td>url</td><td>【可选】swiper初始化方法</td></tr></tbody></table><h2 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h2><p>如果不喜欢原来显示版权信息的页脚样式，可以把页脚的配置取消</p><p><code>_config.butterfly.yml</code> 的 <code>footer</code>下面的<code> copyright</code> 是否显示版权信息 这一项改为<code>false</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#页脚的相关信息</span><br><span class="line"># --------------------------------------</span><br><span class="line"># Footer Settings</span><br><span class="line"># --------------------------------------</span><br><span class="line">footer:</span><br><span class="line">  owner:</span><br><span class="line">    enable: true #是否显示版权信息</span><br><span class="line">    since: 2024 #站点创建时间</span><br><span class="line">  custom_text: aaaaaaa #自定义的文本内容到页脚</span><br><span class="line">  # Copyright of theme and framework</span><br><span class="line">  copyright: fasle #是否显示版权信息</span><br><span class="line">  theme: true #是否显示主题信息</span><br></pre></td></tr></table></figure><h2 id="计时器"><a href="#计时器" class="headerlink" title="计时器"></a>计时器</h2><p>注意上面配置文件中的<code>runtime_js</code> ，这里可以使用自己的自定义 js 文件。</p><p>在项目根目录下的<code>source</code>文件夹中新建一个<code>js</code>文件夹（这个文件夹用于存放自定义的 js 文件），新建一个<code>runtime.js</code> 文件，内容如下: </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">页脚计时器js</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> now=<span class="keyword">new</span> <span class="title class_">Date</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createtime</span>(<span class="params"></span>)&#123;now.<span class="title function_">setTime</span>(now.<span class="title function_">getTime</span>()+<span class="number">1e3</span>);</span><br><span class="line">    <span class="keyword">var</span> e=<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;12/24/2024 00:00:00&quot;</span>),</span><br><span class="line">    t=<span class="title class_">Math</span>.<span class="title function_">trunc</span>(<span class="number">234e8</span>+(now-e)/<span class="number">1e3</span>*<span class="number">17</span>),</span><br><span class="line">    a=(t/<span class="number">1496e5</span>).<span class="title function_">toFixed</span>(<span class="number">6</span>),</span><br><span class="line">    o=<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;12/24/2024 00:00:00&quot;</span>),</span><br><span class="line">    n=(now-o)/<span class="number">1e3</span>/<span class="number">60</span>/<span class="number">60</span>/<span class="number">24</span>,</span><br><span class="line">    r=<span class="title class_">Math</span>.<span class="title function_">floor</span>(n),</span><br><span class="line">    i=(now-o)/<span class="number">1e3</span>/<span class="number">60</span>/<span class="number">60</span>-<span class="number">24</span>*r,</span><br><span class="line">    s=<span class="title class_">Math</span>.<span class="title function_">floor</span>(i);</span><br><span class="line">    <span class="number">1</span>==<span class="title class_">String</span>(s).<span class="property">length</span>&amp;&amp;(s=<span class="string">&quot;0&quot;</span>+s);</span><br><span class="line">    <span class="keyword">var</span> d=(now-o)/<span class="number">1e3</span>/<span class="number">60</span>-<span class="number">1440</span>*r-<span class="number">60</span>*s,</span><br><span class="line">    l=<span class="title class_">Math</span>.<span class="title function_">floor</span>(d);<span class="number">1</span>==<span class="title class_">String</span>(l).<span class="property">length</span>&amp;&amp;(l=<span class="string">&quot;0&quot;</span>+l);</span><br><span class="line">    <span class="keyword">var</span> g=(now-o)/<span class="number">1e3</span>-<span class="number">86400</span>*r-<span class="number">3600</span>*s-<span class="number">60</span>*l,</span><br><span class="line">    b=<span class="title class_">Math</span>.<span class="title function_">round</span>(g);</span><br><span class="line">    <span class="number">1</span>==<span class="title class_">String</span>(b).<span class="property">length</span>&amp;&amp;(b=<span class="string">&quot;0&quot;</span>+b);</span><br><span class="line">    <span class="keyword">let</span> c=<span class="string">&quot;&quot;</span>;</span><br><span class="line">    c=s&lt;<span class="number">18</span>&amp;&amp;s&gt;=<span class="number">9</span>?</span><br><span class="line">    <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div style=&quot;font-size:13px;font-weight:bold&quot;&gt;</span></span><br><span class="line"><span class="string">    本站居然运行了 <span class="subst">$&#123;r&#125;</span> 天 <span class="subst">$&#123;s&#125;</span> 小时 <span class="subst">$&#123;l&#125;</span> 分 <span class="subst">$&#123;b&#125;</span> 秒</span></span><br><span class="line"><span class="string">    &lt;i id=&quot;heartbeat&quot; class=&#x27;fas fa-heartbeat&#x27;&gt;&lt;/i&gt; &lt;br&gt;</span></span><br><span class="line"><span class="string">     &lt;/div&gt;</span></span><br><span class="line"><span class="string">     `</span>:</span><br><span class="line">     <span class="string">`</span></span><br><span class="line"><span class="string">     &lt;div style=&quot;font-size:13px;font-weight:bold&quot;&gt;本站居然运行了 <span class="subst">$&#123;r&#125;</span> 天 <span class="subst">$&#123;s&#125;</span> 小时 <span class="subst">$&#123;l&#125;</span> 分 <span class="subst">$&#123;b&#125;</span> 秒</span></span><br><span class="line"><span class="string">      &lt;i id=&quot;heartbeat&quot; class=&#x27;fas fa-heartbeat&#x27;&gt;&lt;/i&gt; &lt;br&gt;</span></span><br><span class="line"><span class="string">     &lt;/div&gt;</span></span><br><span class="line"><span class="string">     `</span>,</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;workboard&quot;</span>)&amp;&amp;(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;workboard&quot;</span>).<span class="property">innerHTML</span>=c)&#125;<span class="built_in">setInterval</span>((<span class="function">()=&gt;</span>&#123;<span class="title function_">createtime</span>()&#125;),<span class="number">1e3</span>);</span><br></pre></td></tr></table></figure><p>然后修改配置文件中的<code>runtime_js</code>路径为<code>/js/runtime.js</code> 即可。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>背景一图流效果</title>
      <link href="/2025/01/22/%E8%83%8C%E6%99%AF%E4%B8%80%E5%9B%BE%E6%B5%81%E6%95%88%E6%9E%9C/"/>
      <url>/2025/01/22/%E8%83%8C%E6%99%AF%E4%B8%80%E5%9B%BE%E6%B5%81%E6%95%88%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="背景一图流效果"><a href="#背景一图流效果" class="headerlink" title="背景一图流效果"></a>背景一图流效果</h1><p>效果图<br><img src="/2025/01/22/%E8%83%8C%E6%99%AF%E4%B8%80%E5%9B%BE%E6%B5%81%E6%95%88%E6%9E%9C/Pasted%20image%2020250122173027.png"></p><h2 id="1-创建编写CSS样式文件"><a href="#1-创建编写CSS样式文件" class="headerlink" title="1.创建编写CSS样式文件"></a>1.创建编写CSS样式文件</h2><p>在<code>[BlogRoot]\source</code>文件夹下新建一个文件夹<code>css</code>，该文件夹用于存放自定义的<code>css样式</code>，再新建一个名为<code>custom.css</code>，在里面写入以下代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 页脚与头图透明 */</span>  </span><br><span class="line"><span class="selector-id">#footer</span> &#123;  </span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="selector-id">#page-header</span> &#123;  </span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/* 白天模式遮罩透明 */</span>  </span><br><span class="line"><span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;  </span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;  </span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/* 夜间模式遮罩透明 */</span>  </span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;  </span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;  </span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2025/01/22/%E8%83%8C%E6%99%AF%E4%B8%80%E5%9B%BE%E6%B5%81%E6%95%88%E6%9E%9C/Pasted%20image%2020250122172901.png"></p><h2 id="修改主题配置文件"><a href="#修改主题配置文件" class="headerlink" title="修改主题配置文件"></a>修改主题配置文件</h2><p>在主题配置文件<code>[BlogRoot]\_config.butterfly.yml</code>文件中的<code>inject</code>配置项的<code>head</code>子项加入以下代码，代表引入刚刚创建的<code>custom.css</code>文件（这是相对路径的写法）</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span>  </span><br><span class="line">  <span class="attr">head:</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2025/01/22/%E8%83%8C%E6%99%AF%E4%B8%80%E5%9B%BE%E6%B5%81%E6%95%88%E6%9E%9C/Pasted%20image%2020250122172830.png"></p><p>在主题配置文件<code>[BlogRoot]\_config.butterfly.yml</code>文件中的<code>index_img</code>和<code>footer_bg</code>配置项取消头图与页脚图的加载项避免冗余加载</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The banner image of home page  </span></span><br><span class="line"><span class="attr">index_img:</span>   </span><br><span class="line">  </span><br><span class="line"><span class="comment"># Footer Background  </span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="可能出现的问题"><a href="#可能出现的问题" class="headerlink" title="可能出现的问题"></a>可能出现的问题</h2><p>部分人反映一图流改完了背景图也没了，那大概率是你之前没设置背景图。在主题配置文件<code>[BlogRoot]\_config.butterfly.yml</code>文件中的<code>background</code>配置项设置背景图</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background: url(https://source.fomal.cc/img/home_bg.webp)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>violet留言板</title>
      <link href="/2025/01/22/violet%E7%95%99%E8%A8%80%E6%9D%BF/"/>
      <url>/2025/01/22/violet%E7%95%99%E8%A8%80%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="violet留言板"><a href="#violet留言板" class="headerlink" title="violet留言板"></a>violet留言板</h1><p>详见：<a href="https://akilar.top/posts/e2d3c450/">信笺样式留言板</a></p><ol><li>在<code>[BlogRoot]</code>运行指令</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-envelope --save</span><br></pre></td></tr></table></figure><ol start="2"><li>在站点配置文件<code>_config.yml</code><strong>或</strong>主题配置文件<code>_config.butterfly.yml</code>添加以下配置项</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># envelope_comment  </span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/e2d3c450/  </span></span><br><span class="line"><span class="attr">envelope_comment:</span>  </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制开关  </span></span><br><span class="line">  <span class="attr">custom_pic:</span>        </span><br><span class="line">    <span class="attr">cover:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/violet.jpg</span> <span class="comment">#信笺头部图片  </span></span><br><span class="line">    <span class="attr">line:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/line.png</span> <span class="comment">#信笺底部图片  </span></span><br><span class="line">    <span class="attr">beforeimg:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/before.png</span> <span class="comment"># 信封前半部分  </span></span><br><span class="line">    <span class="attr">afterimg:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/after.png</span> <span class="comment"># 信封后半部分  </span></span><br><span class="line">  <span class="attr">message:</span> <span class="comment">#信笺正文，多行文本，写法如下  </span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想问的？</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想说的？</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想吐槽的？</span>  </span><br><span class="line">    <span class="bullet">-</span> <span class="string">哪怕是有什么想吃的，都可以告诉我哦~</span>  </span><br><span class="line">  <span class="attr">bottom:</span> <span class="string">自动书记人偶竭诚为您服务！</span> <span class="comment">#仅支持单行文本  </span></span><br><span class="line">  <span class="attr">height:</span> <span class="comment">#1050px，信封划出的高度  </span></span><br><span class="line">  <span class="attr">path:</span> <span class="comment">#【可选】comments 的路径名称。默认为 comments，生成的页面为 comments/index.html  </span></span><br><span class="line">  <span class="attr">front_matter:</span> <span class="comment">#【可选】comments页面的 front_matter 配置  </span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">留言板</span>  </span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ol start="3"><li>留言板入口</li></ol><p>注意上面的 path 路径默认是 &#x2F;comments&#x2F;index.xml，我们可以在菜单栏中但单独创建一个留言板入口</p><p>留言板的图标可以从 <a href="https://fontawesome.com.cn/">Fontawesome</a>中获得，注意路径为<code>/comments/</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#导航栏</span><br><span class="line">menu:  </span><br><span class="line">  首页: / || fas fa-home  </span><br><span class="line">  归档: /archives/ || fas fa-archive  </span><br><span class="line">  标签: /tags/ || fas fa-tags  </span><br><span class="line">  分类: /categories/ || fas fa-folder-open  </span><br><span class="line">  娱乐||fa fa-heartbeat:  </span><br><span class="line">    音乐: /music/ || fas fa-music  </span><br><span class="line">    照片: /gallery/ || fas fa-images  </span><br><span class="line">    电影: /movies/ || fas fa-video</span><br><span class="line">  留言: /comments/ || fas fa-envelope-open-text  </span><br><span class="line">  友链: /link/ || fas fa-link  </span><br><span class="line">  关于: /about/ || fas fa-heart</span><br></pre></td></tr></table></figure><ol start="4"><li>再次清理，启动项目即可</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Live2D看板娘安装</title>
      <link href="/2025/01/22/Live2D%E7%9C%8B%E6%9D%BF%E5%A8%98%E5%AE%89%E8%A3%85/"/>
      <url>/2025/01/22/Live2D%E7%9C%8B%E6%9D%BF%E5%A8%98%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h1 id="Live2D看板娘安装"><a href="#Live2D看板娘安装" class="headerlink" title="Live2D看板娘安装"></a>Live2D看板娘安装</h1><p>详见：<a href="https://akilar.top/posts/5b8f515f/">Live2d Widget</a></p><p>目前只推荐这个(因为消耗资源较少)，这是博客自带的看板娘，这孩子不会说话也不能换装，只会跟着你的鼠标晃动脑袋，不过有几款超可爱。</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol><li>在Hexo根目录<code>[BlogRoot]</code>下打开终端，输入以下指令安装必要插件：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure><ol start="2"><li>打开站点配置文件<code>[BlogRoot]\config.yml</code><br>搜索live2d,按照如下注释内容指示进行操作。<br>如果没有搜到live2d的配置项，就直接把以下内容复制到最底部。</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Live2D  </span></span><br><span class="line"><span class="comment">## https://github.com/EYHN/hexo-helper-live2d  </span></span><br><span class="line"><span class="attr">live2d:</span>  </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#开关插件版看板娘  </span></span><br><span class="line">  <span class="attr">scriptFrom:</span> <span class="string">local</span> <span class="comment"># 默认  </span></span><br><span class="line">  <span class="attr">pluginRootPath:</span> <span class="string">live2dw/</span> <span class="comment"># 插件在站点上的根目录(相对路径)  </span></span><br><span class="line">  <span class="attr">pluginJsPath:</span> <span class="string">lib/</span> <span class="comment"># 脚本文件相对与插件根目录路径  </span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span> <span class="comment"># 模型文件相对与插件根目录路径  </span></span><br><span class="line">  <span class="comment"># scriptFrom: jsdelivr # jsdelivr CDN  </span></span><br><span class="line">  <span class="comment"># scriptFrom: unpkg # unpkg CDN  </span></span><br><span class="line">  <span class="comment"># scriptFrom: https://npm.elemecdn.com/live2d-widget@3.x/lib/L2Dwidget.min.js # 你的自定义 url  </span></span><br><span class="line">  <span class="attr">tagMode:</span> <span class="literal">false</span> <span class="comment"># 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中  </span></span><br><span class="line">  <span class="attr">debug:</span> <span class="literal">false</span> <span class="comment"># 调试, 是否在控制台输出日志  </span></span><br><span class="line">  <span class="attr">model:</span>  </span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-wanko</span> <span class="comment"># npm-module package name  </span></span><br><span class="line">    <span class="comment"># use: wanko # 博客根目录/live2d_models/ 下的目录名  </span></span><br><span class="line">    <span class="comment"># use: ./wives/wanko # 相对于博客根目录的路径  </span></span><br><span class="line">    <span class="comment"># use: https://npm.elemecdn.com/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # 你的自定义 url  </span></span><br><span class="line">  <span class="attr">display:</span>  </span><br><span class="line">    <span class="attr">position:</span> <span class="string">right</span> <span class="comment">#控制看板娘位置  </span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">150</span> <span class="comment">#控制看板娘大小  </span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">300</span> <span class="comment">#控制看板娘大小  </span></span><br><span class="line">  <span class="attr">mobile:</span>  </span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span> <span class="comment"># 手机中是否展示</span></span><br></pre></td></tr></table></figure><ol start="3"><li>完成后保存修改，在Hexo根目录下运行指令。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean  </span><br><span class="line">hexo g  </span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>之所以必须要使用<code>hexo clean</code>是因为我们需要清空缓存重新生成静态页面，不然看板娘没被加入生成的静态页面里，是不会出现的。</p><h3 id="更换"><a href="#更换" class="headerlink" title="更换"></a>更换</h3><ol><li>同样是在Hexo根目录<code>[BlogRoot]</code>下，打开终端，选择想要的看板娘进行安装，例如我这里用到的是 <code>live2d-widget-model-koharu</code>，一个Q版小正太。其他的模型也可以在<a href="https://huaji8.top/post/live2d-plugin-2.0/">模型预览</a>里查看以供选择。</li></ol><p>可用模型：参考链接<a href="https://blog.csdn.net/wang_123_zy/article/details/87181892">模型预览链接</a><br>live2d-widget-model-chitose<br>live2d-widget-model-epsilon2_1<br>live2d-widget-model-gf<br>live2d-widget-model-haru_01<br>live2d-widget-model-haru_02<br>live2d-widget-model-haruto<br>live2d-widget-model-hibiki<br>live2d-widget-model-hijiki<br>live2d-widget-model-izumi<br>live2d-widget-model-koharu<br>live2d-widget-model-miku<br>live2d-widget-model-nico<br>live2d-widget-model-nietzsche<br>live2d-widget-model-ni-j<br>live2d-widget-model-nipsilon<br>live2d-widget-model-nito<br>live2d-widget-model-shizuku<br>live2d-widget-model-tororo<br>live2d-widget-model-tsumiki<br>live2d-widget-model-unitychan<br>live2d-widget-model-wanko<br>live2d-widget-model-z16</p><ol start="2"><li>输入指令<br>注意，这里的指令是按章上面的模型名称</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save live2d-widget-model-hijiki </span><br></pre></td></tr></table></figure><ol start="3"><li>然后在站点配置文件<code>[BlogRoot]\_config.yml</code>里找到<code>model</code>项修改为期望的模型</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">model:  </span><br><span class="line">  use: live2d-widget-model-hijiki </span><br><span class="line">  # 默认为live2d-widget-model-wanko</span><br></pre></td></tr></table></figure><ol start="4"><li>之后按部就班的运行</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean  </span><br><span class="line">hexo g  </span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>就能在<code>localhost:4000</code>上查看效果了。</p><h3 id="卸载看板娘"><a href="#卸载看板娘" class="headerlink" title="卸载看板娘"></a>卸载看板娘</h3><p>卸载插件和卸载模型的指令都是通过npm进行操作的。在博客根目录<code>[BlogRoot]</code>打开终端，输入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-helper-live2d #卸载看板娘插件  </span><br><span class="line">npm uninstall live2d-widget-model-modelname #卸载看板娘模型。记得替换modelname为看板娘名称</span><br></pre></td></tr></table></figure><p>卸载后为了保证配置项不出错，记得把<code>[BlogRoot]\_config.yml</code>里的配置项给注释或者删除掉。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo中完美插入本地图片</title>
      <link href="/2025/01/22/%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/"/>
      <url>/2025/01/22/%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo中完美插入本地图片"><a href="#Hexo中完美插入本地图片" class="headerlink" title="Hexo中完美插入本地图片"></a>Hexo中完美插入本地图片</h1><p>在 Hexo 的官方文档 <a href="https://hexo.io/zh-cn/docs/asset-folders.html">资源文件夹章节</a> 里，提供了几种插入本地图片的方法。但是，非常遗憾，无论采用哪种方式，在使用其他 Markdown 编辑器进行文章编写时，都无法预览图片。本文介绍了一种方法，可以完美解决此问题。</p><h2 id="Hexo-官方插入本地图片方法"><a href="#Hexo-官方插入本地图片方法" class="headerlink" title="Hexo 官方插入本地图片方法"></a>Hexo 官方插入本地图片方法</h2><p>首先来看官方给出的几种方式。</p><h3 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a>绝对路径</h3><p>如果你的Hexo项目中只有少量图片，那最简单的方法就是将它们统一放在 <code>source/images</code> 文件夹中。然后通过以下方法进行访问。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](/imges/image.jpg)</span><br></pre></td></tr></table></figure><p>图片既可以在首页内容中访问到，也可以在文章正文中访问到。</p><h3 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h3><p>图片除了可以放在统一的 <code>source/images</code> 文件夹中，还可以放在文章自己的目录中。文章的目录可以通过配置 <code>_config.yml</code> 来生成。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure><p>将 <code>_config.yml</code> 文件中的配置项 <code>post_asset_folder</code> 设为 <code>true</code> 后，执行命令 <code>hexo new post_name</code>，在 <code>source/_posts</code> 中会生成文章 <code>post_name.md</code> 和同名文件夹 <code>post_name</code>。将图片资源放在 <code>post_name</code> 中，文章就可以使用相对路径引用图片资源了。引用图片的方法如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](image.jpg)</span><br></pre></td></tr></table></figure><p>以上这种引用方法，图片只能在文章中显示，但无法在首页中正常显示。如果希望图片在文章和首页中同时显示，可以使用标签插件语法。</p><h3 id="标签插件"><a href="#标签插件" class="headerlink" title="标签插件"></a>标签插件</h3><p>通过常规的 markdown 语法和相对路径来引用图片和其它资源可能会导致它们在存档页或者主页上显示不正确。在Hexo 2时代，社区创建了很多插件来解决这个问题。但是，随着Hexo 3 的发布，许多新的标签插件被加入到了核心代码中。这使得你可以更简单地在文章中引用你的资源。</p><p>引用语法如下：  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_path slug %&#125;  </span><br><span class="line">&#123;% asset_img slug [title] %&#125;  </span><br><span class="line">&#123;% asset_link slug [title] %&#125;</span><br></pre></td></tr></table></figure><p>在上述语法下，引用图片的方法如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_img example.jpg This is an example image %&#125;</span><br></pre></td></tr></table></figure><p>通过这种方式，图片将会同时出现在文章和主页以及归档页中。</p><h2 id="hexo-asset-image"><a href="#hexo-asset-image" class="headerlink" title="hexo-asset-image"></a>hexo-asset-image</h2><p>无论是以上哪一种方法，在使用其他 Markdown 编辑器进行文章编写时，都无法预览图片。为了解决此问题，可以安装一个图片路径转换的插件 <a href="https://github.com/CodeFalling/hexo-asset-image">hexo-asset-image</a>。先将 <code>_config.yml</code> 文件中的配置项 <code>post_asset_folder</code> 设为 <code>true</code>，然后在根目录下执行以下命令进行插件的安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure><p>通过 <code>hexo new post_name</code> 命令，在 <code>source/_posts</code> 中会自动生成文章 <code>post_name.md</code> 和同名文件夹 <code>post_name</code>，把所有需要插入的图片放到这个同名文件夹里，通过 Markdown 语法对图片的相对路径引用，即可实现编辑时可预览图片，引用方法如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](post_name/image.jpg)</span><br></pre></td></tr></table></figure><p>然后在发布时 <code>hexo-asset-image</code> 插件会自动将相对路径转为绝对路径，保证在文章和主页以及归档页都能正常显示图片。</p><p>但是，这个插件有个小问题，如果网站部署在子目录下，插件生成的图片路径有问题，导致图片无法显示。需要修改插件。插件代码主要保存在 <code>node_modules/hexo-asset-image/index.js</code> 这个文件，以下是其中一段代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var link = data.permalink;  </span><br><span class="line">var beginPos = getPosition(link, &#x27;/&#x27;, 3) + 1;  </span><br><span class="line">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.  </span><br><span class="line">var endPos = link.lastIndexOf(&#x27;/&#x27;) + 1;  </span><br><span class="line">link = link.substring(beginPos, endPos);</span><br></pre></td></tr></table></figure><p>根据文章链接截取得到 link，其中文章链接一般都是 <code>http://host:port/yyyy/mm/dd/post_name</code>，从第三个 <code>/</code> 后面取到的就是资源的绝对路径，然后对图片的 src 属性进行处理，去掉文章同名文件夹目录，仅保留图片名，然后与前面获取到的资源绝对路径进行拼接，得到图片的绝对路径。</p><p>如果网站部署在子目录下，文章链接是这样的：<br><code>http://host:port/subdirectory/yyyy/mm/dd/post_name</code><br>这时应该从第四个 <code>/</code> 后面开始截取。因此，将代码修改如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var link = data.permalink;  </span><br><span class="line">var rootArray = config.root.split(&#x27;/&#x27;);  </span><br><span class="line">var beginPos = getPosition(link, &#x27;/&#x27;, 2 + rootArray.length - 1) + 1;  </span><br><span class="line">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.  </span><br><span class="line">var endPos = link.lastIndexOf(&#x27;/&#x27;) + 1;  </span><br><span class="line">link = link.substring(beginPos, endPos);</span><br></pre></td></tr></table></figure><p>为了使修改后的插件生效，需要先执行 <code>hexo clean</code> 清理一下，然后再执行 <code>hexo g</code> 重新生成即可。</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>本文介绍了 Hexo 官方插入本地图片的三种方法，但是不推荐使用，因为在使用其他 Markdown 编辑器进行文章编写时，无法预览图片。为了解决此问题，可以安装一个图片路径转换的插件 <code>hexo-asset-image</code>，在生成网站时自动将图片相对路径转为绝对路径，使得在文章和主页以及归档页都能正常显示图片。最后，通过修改插件代码，解决网站部署在子目录下图片无法显示的问题。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>图片test</title>
      <link href="/2025/01/22/%E5%9B%BE%E7%89%87test/"/>
      <url>/2025/01/22/%E5%9B%BE%E7%89%87test/</url>
      
        <content type="html"><![CDATA[<p>图片测试</p><p>图片↓↓↓↓<br><img src="/2025/01/22/%E5%9B%BE%E7%89%87test/20250122111908.png" alt="图片"><br>图片↑↑↑↑</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>修改测试</title>
      <link href="/2025/01/21/2025-01-21-%E4%BF%AE%E6%94%B9%E6%B5%8B%E8%AF%95/"/>
      <url>/2025/01/21/2025-01-21-%E4%BF%AE%E6%94%B9%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<h1 id="修改测试"><a href="#修改测试" class="headerlink" title="修改测试"></a>修改测试</h1><h2 id="启动项目"><a href="#启动项目" class="headerlink" title="启动项目"></a>启动项目</h2><p>代码块</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure><p>代码块</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>第一篇博客文章</title>
      <link href="/2025/01/08/2025-01-07-%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/"/>
      <url>/2025/01/08/2025-01-07-%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="这是一篇文章"><a href="#这是一篇文章" class="headerlink" title="这是一篇文章"></a>这是一篇文章</h1><h2 id="启动项目"><a href="#启动项目" class="headerlink" title="启动项目"></a>启动项目</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl; hexo s</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
